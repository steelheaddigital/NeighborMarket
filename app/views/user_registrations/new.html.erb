<div class="container">
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => "well"}) do |f| %>
<h2>Sign Up</h2>
<div class="row">
  <div class="span12">
    <p class="notice"><%= flash[:notice] %></p>
    <%= flash[:alert] %>
    <%= devise_error_messages! %>
  </div>
</div>
<div class="row-fluid">
  <div class="span3">
    <div><%= f.label "User Name*" %>
    <%= f.text_field :username %></div>

    <div><%= f.label "Email*" %>
    <%= f.email_field :email %></div>

    <div><%= f.label "Password*" %>
    <%= f.password_field :password %></div>

    <div><%= f.label "Password Confirmation*" %>
    <%= f.password_field :password_confirmation %></div>
    
    <div><%= f.label "First name*" %>
    <%= f.text_field :first_name %></div>

    <div><%= f.label "Last name*" %>
    <%= f.text_field :last_name %></div>

    <div><%= f.label "Initial*" %>
    <%= f.text_field :initial %></div>
  </div>
  <div class="span1"></div>
  <div class="span3">
    <div>
      <%if params[:user][:user_type] == "seller"%>
        <%= f.label "Phone*" %>
      <% else %>
        <%= f.label "Phone" %>
      <% end %>
      <%= f.telephone_field :phone %>
    </div>  

    <div><%= f.label "Address*" %>
    <%= f.text_field :address %></div>

    <div><%= f.label "City*" %>
    <%= f.text_field :city %></div>

    <div><%= f.label "Country*" %>
    <%= f.country_select(:country, "US") %></div>

    <div><%= f.label "State*" %>
    <%= f.state_select :state %></div>

    <div><%= f.label "Zip*" %>
    <%= f.text_field :zip %></div>
  </div>
  <div class="span1"></div>
    <div class="span3">
      <div><%= f.label "About Me" %>
      <%= f.text_area :aboutme, :rows => 10 %></div>

      <% resource.roles.each do |role| %>
        <% rolable_type = params[:user][:user_type] %>
        <%= fields_for role.rolable do |rf| %>
          <% render :partial => "#{rolable_type.downcase.underscore}_fields", :locals => { :f => rf } %>
        <% end %>
      <% end %>

      <%= f.fields_for :roles do |rf| %>
        <%= rf.fields_for :buyer do |s|  %>
          <% render :partial => "buyer_fields", :locals => { :f => s } %>
        <% end %>
      <% end %>

      <%= f.fields_for :roles do |rf| %>
        <%= rf.fields_for :seller do |b|  %>
          <% render :partial => "seller_fields", :locals => { :f => b } %>
        <% end %>
      <% end %>

      <%= f.fields_for :roles do |rf| %>
        <%= rf.fields_for :manager do |b|  %>
          <% render :partial => "manager_fields", :locals => { :f => b } %>
        <% end %>
      <% end %>
      <%= hidden_field :user, :user_type, :value => params[:user][:user_type] %>
      <% # customized code end %>
      
    </div>
  </div>
  <div class="row" style="margin-top: 19px;">
    <div class="span9"></div>
    <div class="span2">
      <%= f.submit "Sign up", {:class => "btn btn-primary", :style => "width: 100%; height: 35px;"}%>
    </div>
  </div>
<% end %>
</div>


 