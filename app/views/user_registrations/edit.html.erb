<h2>Edit <%= resource_name.to_s.humanize %></h2>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <p class="notice"><%= flash[:notice] %></p>
  <%= flash[:alert] %>
  <%= devise_error_messages! %>
  
  <div><%= f.label "User Name" %>
  <%= f.text_field :username %></div>

  <div><%= f.label "Email" %>
  <%= f.email_field :email %></div>

  <div><%= f.label "Password (leave blank if you don't want to change it)" %>
  <%= f.password_field :password %></div>

  <div><%= f.label "Password Confirmation*" %>
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.label "Current Password (we need your current password to confirm your changes)"%>
  <%= f.password_field :current_password %></div>

  <div><%= f.label "First name" %>
  <%= f.text_field :first_name %></div>

  <div><%= f.label "Last name" %>
  <%= f.text_field :last_name %></div>

  <div><%= f.label "Initial" %>
  <%= f.text_field :initial %></div>
    
  <div><%= f.label "Phone" %>
  <%= f.telephone_field :phone %></div>  

  <div><%= f.label "Address" %>
  <%= f.text_field :address %></div>
  
  <div><%= f.label "City" %>
  <%= f.text_field :city %></div>
    
  <div><%= f.label "State" %>
  <%= f.state_select :state %></div>

  <div><%= f.label "Country" %>
  <%= f.country_select(:country, "US") %></div>
  
  <div><%= f.label "Zip" %>
  <%= f.text_field :zip %></div>

  <div><%= f.label "About Me" %>
  <%= f.text_area :aboutme, :rows => 10  %></div>
  
    <%= f.fields_for :roles do |rf| %>
      <% if rf.object.rolable_type == "Buyer" %>
        <%= rf.fields_for :buyer do |b|  %>
          <%= render :partial => "buyer_fields", :locals => { :f => b } %>
        <% end %>
      <% end %>
    <% end %>

    <%= f.fields_for :roles do |rf| %>
      <% if rf.object.rolable_type == "Seller" %>
        <%= rf.fields_for :seller do |s|  %>
          <%= render :partial => "seller_fields", :locals => { :f => s } %>
        <% end %>
      <% end %>
    <% end %>

    <%= f.fields_for :roles do |rf| %>
      <% if rf.object.rolable_type == "Manager" %>
        <%= rf.fields_for :manager do |m|  %>
          <%= render :partial => "manager_fields", :locals => { :f => m } %>
        <% end %>
      <% end %>
    <% end %>

  <% # customized code end %>

  <div><%= f.submit "Update" %></div>
<% end %>

<h3>Cancel my account</h3>

<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :confirm => "Are you sure?", :method => :delete %>.</p>

<%= link_to "Back", :back %>
