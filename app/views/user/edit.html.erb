<%
#
#Copyright 2013 Neighbor Market
#
#This file is part of Neighbor Market.
#
#Neighbor Market is free software: you can redistribute it and/or modify
#it under the terms of the GNU General Public License as published by
#the Free Software Foundation, either version 3 of the License, or
#(at your option) any later version.
#
#Neighbor Market is distributed in the hope that it will be useful,
#but WITHOUT ANY WARRANTY; without even the implied warranty of
#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#GNU General Public License for more details.
#
#You should have received a copy of the GNU General Public License
#along with Neighbor Market.  If not, see <http://www.gnu.org/licenses/>.
#
%>

<div class="modal-header">
  <button class="close" data-dismiss="modal" type="button">Ã—</button>
  <h3 id="InventoryHeading">Edit User</h3>
</div>
<%= form_for(@user, :url => user_path, :html => { :id => 'EditUserForm' }) do |f| %>
<div class="modal-body">
	<div class="modalErrorMessages"><%= f.error_messages %></div>
	<div class="row-fluid">
		<div class="span4">
		    <div><%= f.label "User Name*" %>
		    <%= f.text_field :username %></div>

		    <div><%= f.label "Email*" %>
		    <%= f.email_field :email %></div>
	   
		    <div>
			      <%if @user.auto_created && @user.auto_create_updated_at.nil?%>
			        <%= f.label "Password*" %>
			      <% else %>
			        <%= f.label "Password (leave blank if you don't want to change it)" %>
			      <% end %>
		    	  <%= f.password_field :password %>
			  </div>

		    <div><%= f.label "Password Confirmation*" %>
		    <%= f.password_field :password_confirmation %></div>

		    <div><%= f.label "First name*" %>
		    <%= f.text_field :first_name %></div>

		    <div><%= f.label "Last name*" %>
		    <%= f.text_field :last_name %></div>

		    <div><%= f.label "Initial*" %>
		    <%= f.text_field :initial %></div>
		 </div>
		 <div class="span4">
			<div>
		      <%if @user.seller?%>
		        <%= f.label "Phone*" %>
		      <% else %>
		        <%= f.label "Phone" %>
		      <% end %>
		      <%= f.telephone_field :phone %>
		    </div>
		
		     <div><%= f.label "Address*" %>
		     <%= f.text_field :address %></div>

		     <div><%= f.label "City*" %>
		     <%= f.text_field :city %></div>

		     <div><%= f.label "State*" %>
		     <%= f.subregion_select :state, Carmen::Country.coded('US') %></div>

		     <div><%= f.label "Country*" %>
		     <%= f.country_select :country, {priority: %w(US CA)} %></div>

		     <div><%= f.label "Zip*" %>
		     <%= f.text_field :zip %></div>
		
		     <div><%= f.label "About Me" %>
		     <%= f.text_area :aboutme, :rows => 5  %></div>
		</div>
		<div class="span4">
		    <% @user.roles.each do |role| %>
		      <%= render :partial => "user_registrations/#{role.name.downcase.camelize.underscore}_fields", :locals => { :f => f } %>
		    <% end %>
      
		    <% if @user.seller? %>
		      <div><b><%= f.label "Seller Approved" %></b>
		      <%= f.select(:approved_seller, [['true', 'true'],['false', 'false']]) %></div>
		      <div><b><%= f.label "Listing Approval Style" %></b>
		      <%= f.select(:listing_approval_style, [['manual', 'manual'],['auto','auto']]) %></div>
		    <%end%>
        	<div>
				<b><%= f.label "Manager?" %></b>
      			<%= check_box_tag 'manager', 'true', @user.manager? %>
			</div>
		</div>
   </div>
</div>
<div class="modal-footer">
  <a class="btn" data-dismiss="modal" href="#">Close</a>
  <%= f.submit("Save Changes", :class => 'btn btn-primary') %>
</div>
<% end %>
</div>
